---
title: "Map preparation for Homework #2"
author: "Haley Chinander"
output:
  html_document:
    df_print: paged
---

## Load libraries

```{r}

library(ggplot2)
library(scales)
library(leaflet)
library(sf)
library(DT)

```

## Link data from github

```{r}
rm(list = ls())

cambridgeLink="https://github.com/SpatialDataAssignments/SDA_Homework2/raw/refs/heads/main/cambridge_grid10_idw.gpkg"

homeLink = "https://github.com/SpatialDataAssignments/SDA_Homework2/raw/refs/heads/main/myEstats.gpkg"

tableLink = "https://github.com/SpatialDataAssignments/SDA_Homework2/raw/refs/heads/main/prices_by_option.csv"


cambridge <- st_read(cambridgeLink)

estate <- st_read(homeLink)

price_options <- read.csv(tableLink)


```

## Checking CRS

```{r}
st_crs(cambridge)$epsg
```

# Inverse Distance Weighting Interpolation Map:

```{r}

plot1=ggplot() +
  geom_sf(data = cambridge, aes(fill = IDW_10)) + # Plot the grid with IDW results
  scale_fill_viridis_c() + # Use a color scale for the interpolated prices
  geom_sf(data = estate, color = "red", size = 3) + # Plot your estate point
  labs(title = "Interpolated AirBNB prices and the estate location", fill = "IDW Price") +
  theme_minimal() 

plot1

```

# Price option table

```{r}

library(gt)

table <- datatable(price_options[c("address", "geometry","hex_id","IDW_10")], options = list(
  dom = 't',        # Only show the table (no search, pagination, etc.)
  paging = FALSE,   # Disable pagination
  searching = FALSE # Disable search box
), class = 'compact')

table


```




# Save plots for dashboard

```{r}

setwd("C:/Users/HP/Documents/GitHub/SDA_Homework2")

saveRDS(plot1,file = "plot1.rds")
saveRDS(table,file ="table.rds")

```
